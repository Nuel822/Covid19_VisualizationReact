{"ast":null,"code":"import { each } from '@antv/util';\nimport { translate } from '../../../util/transform';\n/**\n * @ignore\n * 将 label 限制在画布范围内，简单得将超出画布的 label 往画布内调整\n * @param labels\n * @param cfg\n */\n\nexport function limitInCanvas(items, labels, shapes, region) {\n  each(labels, function (label) {\n    var regionMinX = region.minX,\n        regionMinY = region.minY,\n        regionMaxX = region.maxX,\n        regionMaxY = region.maxY;\n\n    var _a = label.getCanvasBBox(),\n        minX = _a.minX,\n        minY = _a.minY,\n        maxX = _a.maxX,\n        maxY = _a.maxY,\n        x = _a.x,\n        y = _a.y,\n        width = _a.width,\n        height = _a.height;\n\n    var finalX = x;\n    var finalY = y;\n\n    if (minX < regionMinX || maxX < regionMinX) {\n      // 超出左侧\n      finalX = regionMinX;\n    }\n\n    if (minY < regionMinY || maxY < regionMinY) {\n      // 超出顶部\n      finalY = regionMinY;\n    }\n\n    if (minX > regionMaxX) {\n      // 整体超出右侧\n      finalX = regionMaxX - width;\n    } else if (maxX > regionMaxX) {\n      // 超出右侧\n      finalX = finalX - (maxX - regionMaxX);\n    }\n\n    if (minY > regionMaxY) {\n      // 整体超出顶部\n      finalY = regionMaxY - height;\n    } else if (maxY > regionMaxY) {\n      // 超出底部\n      finalY = finalY - (maxY - regionMaxY);\n    }\n\n    if (finalX !== x || finalY !== y) {\n      translate(label, finalX - x, finalY - y);\n    }\n  });\n}","map":{"version":3,"sources":["../../../../src/geometry/label/layout/limit-in-canvas.ts"],"names":[],"mappings":"AAAA,SAAS,IAAT,QAAqB,YAArB;AAEA,SAAS,SAAT,QAA0B,yBAA1B;AAGA;;;;;;;AAMA,OAAM,SAAU,aAAV,CAAwB,KAAxB,EAA4C,MAA5C,EAA8D,MAA9D,EAA2F,MAA3F,EAAuG;AAC3G,EAAA,IAAI,CAAC,MAAD,EAAS,UAAC,KAAD,EAAc;AACjB,QAAA,UAAA,GAAA,MAAA,CAAA,IAAA;AAAA,QAAkB,UAAA,GAAA,MAAA,CAAA,IAAlB;AAAA,QAAoC,UAAA,GAAA,MAAA,CAAA,IAApC;AAAA,QAAsD,UAAA,GAAA,MAAA,CAAA,IAAtD;;AACF,QAAA,EAAA,GAAA,KAAA,CAAA,aAAA,EAAA;AAAA,QAAE,IAAA,GAAA,EAAA,CAAA,IAAF;AAAA,QAAQ,IAAA,GAAA,EAAA,CAAA,IAAR;AAAA,QAAc,IAAA,GAAA,EAAA,CAAA,IAAd;AAAA,QAAoB,IAAA,GAAA,EAAA,CAAA,IAApB;AAAA,QAA0B,CAAA,GAAA,EAAA,CAAA,CAA1B;AAAA,QAA6B,CAAA,GAAA,EAAA,CAAA,CAA7B;AAAA,QAAgC,KAAA,GAAA,EAAA,CAAA,KAAhC;AAAA,QAAuC,MAAA,GAAA,EAAA,CAAA,MAAvC;;AAEN,QAAI,MAAM,GAAG,CAAb;AACA,QAAI,MAAM,GAAG,CAAb;;AACA,QAAI,IAAI,GAAG,UAAP,IAAqB,IAAI,GAAG,UAAhC,EAA4C;AAC1C;AACA,MAAA,MAAM,GAAE,UAAR;AACD;;AACD,QAAI,IAAI,GAAG,UAAP,IAAqB,IAAI,GAAG,UAAhC,EAA6C;AAC3C;AACA,MAAA,MAAM,GAAG,UAAT;AACD;;AAED,QAAI,IAAI,GAAG,UAAX,EAAuB;AACrB;AACA,MAAA,MAAM,GAAG,UAAU,GAAG,KAAtB;AACD,KAHD,MAGO,IAAI,IAAI,GAAG,UAAX,EAAuB;AAC5B;AACA,MAAA,MAAM,GAAG,MAAM,IAAI,IAAI,GAAG,UAAX,CAAf;AACD;;AAED,QAAI,IAAI,GAAG,UAAX,EAAuB;AACrB;AACA,MAAA,MAAM,GAAG,UAAU,GAAG,MAAtB;AACD,KAHD,MAGO,IAAI,IAAI,GAAG,UAAX,EAAuB;AAC5B;AACA,MAAA,MAAM,GAAG,MAAM,IAAI,IAAI,GAAG,UAAX,CAAf;AACD;;AAED,QAAI,MAAM,KAAK,CAAX,IAAgB,MAAM,KAAK,CAA/B,EAAkC;AAChC,MAAA,SAAS,CAAC,KAAD,EAAQ,MAAM,GAAG,CAAjB,EAAoB,MAAM,GAAG,CAA7B,CAAT;AACD;AACF,GAlCG,CAAJ;AAmCD","sourceRoot":"","sourcesContent":["import { each } from '@antv/util';\nimport { translate } from '../../../util/transform';\n/**\n * @ignore\n * 将 label 限制在画布范围内，简单得将超出画布的 label 往画布内调整\n * @param labels\n * @param cfg\n */\nexport function limitInCanvas(items, labels, shapes, region) {\n    each(labels, function (label) {\n        var regionMinX = region.minX, regionMinY = region.minY, regionMaxX = region.maxX, regionMaxY = region.maxY;\n        var _a = label.getCanvasBBox(), minX = _a.minX, minY = _a.minY, maxX = _a.maxX, maxY = _a.maxY, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var finalX = x;\n        var finalY = y;\n        if (minX < regionMinX || maxX < regionMinX) {\n            // 超出左侧\n            finalX = regionMinX;\n        }\n        if (minY < regionMinY || maxY < regionMinY) {\n            // 超出顶部\n            finalY = regionMinY;\n        }\n        if (minX > regionMaxX) {\n            // 整体超出右侧\n            finalX = regionMaxX - width;\n        }\n        else if (maxX > regionMaxX) {\n            // 超出右侧\n            finalX = finalX - (maxX - regionMaxX);\n        }\n        if (minY > regionMaxY) {\n            // 整体超出顶部\n            finalY = regionMaxY - height;\n        }\n        else if (maxY > regionMaxY) {\n            // 超出底部\n            finalY = finalY - (maxY - regionMaxY);\n        }\n        if (finalX !== x || finalY !== y) {\n            translate(label, finalX - x, finalY - y);\n        }\n    });\n}\n//# sourceMappingURL=limit-in-canvas.js.map"]},"metadata":{},"sourceType":"module"}