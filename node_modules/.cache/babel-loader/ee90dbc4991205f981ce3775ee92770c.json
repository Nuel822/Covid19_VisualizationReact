{"ast":null,"code":"var _jsxFileName = \"/Users/bobby/Desktop/React_Covid19Visualization/covid19_visualization_react/src/component/statistics/countryCaseStats.component.jsx\";\nimport React, { useState } from 'react';\nimport { Card, CardHeader, CardBody, Button, InputGroup, FormInput, InputGroupAddon } from \"shards-react\";\nimport { Chart } from '@antv/g2';\nconst initialState = {\n  searchInput: []\n};\nconst data = [{\n  item: '事例一',\n  count: 40,\n  percent: 0.4\n}, {\n  item: '事例二',\n  count: 21,\n  percent: 0.21\n}, {\n  item: '事例三',\n  count: 17,\n  percent: 0.17\n}, {\n  item: '事例四',\n  count: 13,\n  percent: 0.13\n}, {\n  item: '事例五',\n  count: 9,\n  percent: 0.09\n}];\n\nconst CountryCaseStats = props => {\n  const [state, setstate] = useState(initialState);\n  const chartData = [];\n  let rendered = false;\n\n  const displayChart = e => {\n    e.preventDefault();\n    var filterResult = props.countryCaseData.filter(data => state.searchInput == data.country);\n\n    if (filterResult && filterResult.length > 0) {\n      chartData.push({\n        item: \"Active\",\n        count: (filterResult[0].active / filterResult[0].totalCases).toFixed(2),\n        percentage: (filterResult[0].active / filterResult[0].totalCases * 100).toFixed(3)\n      });\n      chartData.push({\n        item: \"Critical\",\n        count: (filterResult[0].critical / filterResult[0].totalCases).toFixed(2),\n        percentage: (filterResult[0].critical / filterResult[0].totalCases * 100).toFixed(0)\n      });\n      chartData.push({\n        item: \"Recovered\",\n        count: (filterResult[0].recovered / filterResult[0].totalCases).toFixed(2),\n        percentage: (filterResult[0].recovered / filterResult[0].totalCases * 100).toFixed(3)\n      });\n      chartData.push({\n        item: \"Deaths\",\n        count: (filterResult[0].totalDeaths / filterResult[0].totalCases).toFixed(2),\n        percentage: (filterResult[0].totalDeaths / filterResult[0].totalCases * 100).toFixed(3)\n      });\n      console.log(chartData);\n      const chart = new Chart({\n        container: 'containerPieChart',\n        autoFit: true,\n        height: 500\n      });\n      chart.data(chartData);\n      chart.scale('percent', {\n        formatter: val => {\n          val = val * 100 + '%';\n          return val;\n        }\n      });\n      chart.coordinate('theta', {\n        radius: 0.75,\n        innerRadius: 0.6\n      });\n      chart.tooltip({\n        showTitle: false,\n        showMarkers: false,\n        itemTpl: '<li class=\"g2-tooltip-list-item\"><span style=\"background-color:{color};\" class=\"g2-tooltip-marker\"></span>{name}: {value}</li>'\n      });\n      chart.annotation().text({\n        position: ['50%', '50%'],\n        content: \"Total Confirmed Cases\",\n        style: {\n          fontSize: 14,\n          fill: '#8c8c8c',\n          textAlign: 'center'\n        },\n        offsetY: -20\n      }).text({\n        position: ['50%', '50%'],\n        content: \"Total\",\n        style: {\n          fontSize: 20,\n          fill: '#8c8c8c',\n          textAlign: 'center'\n        },\n        offsetX: -10,\n        offsetY: 20\n      });\n      chart.interval().adjust('stack').position('percent').color('item').label('percent', percent => {\n        return {\n          content: data => {\n            return `${data.item}: ${percent * 100}%`;\n          }\n        };\n      }).tooltip('item*percent', (item, percent) => {\n        percent = percent * 100 + '%';\n        return {\n          name: item,\n          value: percent\n        };\n      });\n      rendered = true;\n      chart.interaction('element-active');\n      chart.render();\n    }\n  };\n\n  const handleChange = e => {\n    setstate({ ...state,\n      searchInput: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    small: true,\n    className: \"h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"border-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }, props.title)), /*#__PURE__*/React.createElement(CardBody, {\n    className: \"py-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    seamless: true,\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormInput, {\n    placeholder: \"Enter Country Name\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(InputGroupAddon, {\n    type: \"append\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    theme: \"primary\",\n    onClick: displayChart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, \"Search\"))), rendered && /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, \"No Search Record Found\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"containerPieChart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default CountryCaseStats;","map":{"version":3,"sources":["/Users/bobby/Desktop/React_Covid19Visualization/covid19_visualization_react/src/component/statistics/countryCaseStats.component.jsx"],"names":["React","useState","Card","CardHeader","CardBody","Button","InputGroup","FormInput","InputGroupAddon","Chart","initialState","searchInput","data","item","count","percent","CountryCaseStats","props","state","setstate","chartData","rendered","displayChart","e","preventDefault","filterResult","countryCaseData","filter","country","length","push","active","totalCases","toFixed","percentage","critical","recovered","totalDeaths","console","log","chart","container","autoFit","height","scale","formatter","val","coordinate","radius","innerRadius","tooltip","showTitle","showMarkers","itemTpl","annotation","text","position","content","style","fontSize","fill","textAlign","offsetY","offsetX","interval","adjust","color","label","name","value","interaction","render","handleChange","target","title"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Card, CardHeader, CardBody, Button, InputGroup, FormInput, InputGroupAddon } from \"shards-react\";\nimport { Chart } from '@antv/g2';\n\nconst initialState = {\n    searchInput: []\n}\n\nconst data = [\n    { item: '事例一', count: 40, percent: 0.4 },\n    { item: '事例二', count: 21, percent: 0.21 },\n    { item: '事例三', count: 17, percent: 0.17 },\n    { item: '事例四', count: 13, percent: 0.13 },\n    { item: '事例五', count: 9, percent: 0.09 },\n  ];\nconst CountryCaseStats = (props) => {\n\n    const [state, setstate] = useState(initialState)\n\n    const chartData = [];\n    let rendered = false;\n   \n    const displayChart = (e) => {\n        e.preventDefault();\n        var filterResult = props.countryCaseData.filter(data => state.searchInput == data.country);\n\n        if (filterResult && filterResult.length > 0) {\n\n            chartData.push({\n                item: \"Active\", count: (filterResult[0].active / filterResult[0].totalCases).toFixed(2)\n                , percentage: ((filterResult[0].active / filterResult[0].totalCases) * 100).toFixed(3)\n            });\n\n            chartData.push({\n                item: \"Critical\", count: (filterResult[0].critical / filterResult[0].totalCases).toFixed(2)\n                , percentage: ((filterResult[0].critical / filterResult[0].totalCases) * 100).toFixed(0)\n            });\n\n            chartData.push({\n                item: \"Recovered\", count: (filterResult[0].recovered / filterResult[0].totalCases).toFixed(2)\n                , percentage: ((filterResult[0].recovered / filterResult[0].totalCases) * 100).toFixed(3)\n            });\n\n            chartData.push({\n                item: \"Deaths\", count: (filterResult[0].totalDeaths / filterResult[0].totalCases).toFixed(2)\n                , percentage: ((filterResult[0].totalDeaths / filterResult[0].totalCases) * 100).toFixed(3)\n            })\n\n            console.log(chartData);\n\n            const chart = new Chart({\n                container: 'containerPieChart',\n                autoFit: true,\n                height: 500,\n            });\n\n            chart.data(chartData);\n            chart.scale('percent', {\n                formatter: (val) => {\n                    val = val * 100 + '%';\n                    return val;\n                },\n            }); chart.coordinate('theta', {\n                radius: 0.75,\n                innerRadius: 0.6,\n            });\n            chart.tooltip({\n                showTitle: false,\n                showMarkers: false,\n                itemTpl: '<li class=\"g2-tooltip-list-item\"><span style=\"background-color:{color};\" class=\"g2-tooltip-marker\"></span>{name}: {value}</li>',\n            });\n            chart.annotation()\n                .text({\n                    position: ['50%', '50%'],\n                    content: \"Total Confirmed Cases\",\n                    style: {\n                        fontSize: 14,\n                        fill: '#8c8c8c',\n                        textAlign: 'center',\n                    },\n                    offsetY: -20,\n                })\n                .text({\n                    position: ['50%', '50%'],\n                    content: \"Total\",\n                    style: {\n                        fontSize: 20,\n                        fill: '#8c8c8c',\n                        textAlign: 'center',\n                    },\n                    offsetX: -10,\n                    offsetY: 20,\n                });\n            chart.interval()\n                .adjust('stack')\n                .position('percent')\n                .color('item')\n                .label('percent', (percent) => {\n                    return {\n                        content: (data) => {\n                            return `${data.item}: ${percent * 100}%`;\n                        },\n                    };\n                })\n                .tooltip('item*percent', (item, percent) => {\n                    percent = percent * 100 + '%';\n                    return {\n                        name: item,\n                        value: percent,\n                    };\n                });\n            rendered = true;\n            chart.interaction('element-active');\n            chart.render();\n        }\n\n    }\n    const handleChange = (e) => {\n        setstate({ ...state, searchInput: e.target.value })\n    }\n\n    return (\n        <Card small className=\"h-100\">\n            <CardHeader className=\"border-bottom\">\n                <h6 className=\"m-0\">{props.title}</h6>\n            </CardHeader>\n            <CardBody className=\"py-0\">\n                <InputGroup seamless className=\"mb-3\">\n                    <FormInput placeholder=\"Enter Country Name\" onChange={handleChange} />\n                    <InputGroupAddon type=\"append\">\n                        <Button theme=\"primary\" onClick={displayChart}>Search</Button>\n                    </InputGroupAddon>\n                </InputGroup>\n                {rendered && (\n                    <h3 className=\"m-0\">No Search Record Found</h3>\n                )}\n                <div id=\"containerPieChart\" />\n            </CardBody>\n\n        </Card>\n    );\n}\n\nexport default CountryCaseStats;\n"]},"metadata":{},"sourceType":"module"}