{"ast":null,"code":"import { filter, isArray, isNil } from '@antv/util';\n\nfunction isValueEmpty(value) {\n  return isNil(value) || isNaN(value);\n}\n\nfunction isYNil(point) {\n  if (isArray(point)) {\n    // 特殊处理 area 的关键点数据，其关键点结构为 [{x: 0, y: 1}, {x: 0, y: 2}]\n    return isValueEmpty(point[1].y);\n  }\n\n  var value = point.y;\n  return isArray(value) ? isValueEmpty(value[0]) : isValueEmpty(value);\n}\n/**\n * @ignore\n * 分割数据，用于处理在一组点数据中，y 对应的数值存在 null/undefined/NaN 的情况\n * 应用于折线图、区域图以及路径图\n *\n * ```typescript\n * // return [[{x: 1, y: 2}, {x: 3, y: 3}]]\n * getPathPoints([{x: 1, y: 2}, {x: 2, y: null}, {x: 3, y: 3}], true);\n * // return [[{x: 1, y: 2}], [{x: 3, y: 3}]]\n * getPathPoints([{x: 1, y: 2}, {x: 2, y: null}, {x: 3, y: 3}], false);\n * // return [[[{ x: 1, y: 10 }, { x: 2, y: 2 }], [{ x: 9, y: 34 }, { x: 1, y: 1 }]]]\n * getPathPoints([\n *   [{ x: 1, y: 10 }, { x: 2, y: 2 }],\n *   [{ x: 4, y: 2 }, { x: 8, y: NaN }],\n *   [{ x: 9, y: 34 }, { x: 1, y: 1 }],\n * ], true);\n * ```\n *\n * @param points 要进行处理点集合\n * @param connectNulls 是否连接空值数据\n * @returns 返回处理后的点集合\n */\n\n\nexport function getPathPoints(points, connectNulls) {\n  if (!points.length) {\n    return [];\n  }\n\n  if (connectNulls) {\n    // 即 y 值为空的场景\n    var filtered = filter(points, function (point) {\n      return !isYNil(point);\n    });\n    return [filtered];\n  }\n\n  var result = [];\n  var tmp = [];\n  points.forEach(function (point) {\n    if (isYNil(point)) {\n      if (tmp.length) {\n        result.push(tmp);\n        tmp = [];\n      }\n    } else {\n      tmp.push(point);\n    }\n  });\n\n  if (tmp.length) {\n    result.push(tmp);\n  }\n\n  return result;\n}","map":{"version":3,"sources":["../../../../src/geometry/shape/util/get-path-points.ts"],"names":[],"mappings":"AAAA,SAAS,MAAT,EAAiB,OAAjB,EAA0B,KAA1B,QAAuC,YAAvC;;AAGA,SAAS,YAAT,CAAsB,KAAtB,EAA2B;AACzB,SAAO,KAAK,CAAC,KAAD,CAAL,IAAgB,KAAK,CAAC,KAAD,CAA5B;AACD;;AAED,SAAS,MAAT,CAAgB,KAAhB,EAA2C;AACzC,MAAI,OAAO,CAAC,KAAD,CAAX,EAAoB;AAClB;AACA,WAAO,YAAY,CAAC,KAAK,CAAC,CAAD,CAAL,CAAS,CAAV,CAAnB;AACD;;AACD,MAAM,KAAK,GAAG,KAAK,CAAC,CAApB;AACA,SAAO,OAAO,CAAC,KAAD,CAAP,GAAiB,YAAY,CAAC,KAAK,CAAC,CAAD,CAAN,CAA7B,GAA0C,YAAY,CAAC,KAAD,CAA7D;AACD;AAED;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAM,SAAU,aAAV,CAAwB,MAAxB,EAA+C,YAA/C,EAAqE;AACzE,MAAI,CAAC,MAAM,CAAC,MAAZ,EAAoB;AAClB,WAAO,EAAP;AACD;;AAED,MAAI,YAAJ,EAAkB;AAChB;AACA,QAAM,QAAQ,GAAG,MAAM,CAAC,MAAD,EAAS,UAAC,KAAD,EAA4B;AAC1D,aAAO,CAAC,MAAM,CAAC,KAAD,CAAd;AACD,KAFsB,CAAvB;AAGA,WAAO,CAAC,QAAD,CAAP;AACD;;AAED,MAAM,MAAM,GAAG,EAAf;AACA,MAAI,GAAG,GAAG,EAAV;AACA,EAAA,MAAM,CAAC,OAAP,CAAe,UAAC,KAAD,EAA4B;AACzC,QAAI,MAAM,CAAC,KAAD,CAAV,EAAmB;AACjB,UAAI,GAAG,CAAC,MAAR,EAAgB;AACd,QAAA,MAAM,CAAC,IAAP,CAAY,GAAZ;AACA,QAAA,GAAG,GAAG,EAAN;AACD;AACF,KALD,MAKO;AACL,MAAA,GAAG,CAAC,IAAJ,CAAS,KAAT;AACD;AACF,GATD;;AAWA,MAAI,GAAG,CAAC,MAAR,EAAgB;AACd,IAAA,MAAM,CAAC,IAAP,CAAY,GAAZ;AACD;;AACD,SAAO,MAAP;AACD","sourceRoot":"","sourcesContent":["import { filter, isArray, isNil } from '@antv/util';\nfunction isValueEmpty(value) {\n    return isNil(value) || isNaN(value);\n}\nfunction isYNil(point) {\n    if (isArray(point)) {\n        // 特殊处理 area 的关键点数据，其关键点结构为 [{x: 0, y: 1}, {x: 0, y: 2}]\n        return isValueEmpty(point[1].y);\n    }\n    var value = point.y;\n    return isArray(value) ? isValueEmpty(value[0]) : isValueEmpty(value);\n}\n/**\n * @ignore\n * 分割数据，用于处理在一组点数据中，y 对应的数值存在 null/undefined/NaN 的情况\n * 应用于折线图、区域图以及路径图\n *\n * ```typescript\n * // return [[{x: 1, y: 2}, {x: 3, y: 3}]]\n * getPathPoints([{x: 1, y: 2}, {x: 2, y: null}, {x: 3, y: 3}], true);\n * // return [[{x: 1, y: 2}], [{x: 3, y: 3}]]\n * getPathPoints([{x: 1, y: 2}, {x: 2, y: null}, {x: 3, y: 3}], false);\n * // return [[[{ x: 1, y: 10 }, { x: 2, y: 2 }], [{ x: 9, y: 34 }, { x: 1, y: 1 }]]]\n * getPathPoints([\n *   [{ x: 1, y: 10 }, { x: 2, y: 2 }],\n *   [{ x: 4, y: 2 }, { x: 8, y: NaN }],\n *   [{ x: 9, y: 34 }, { x: 1, y: 1 }],\n * ], true);\n * ```\n *\n * @param points 要进行处理点集合\n * @param connectNulls 是否连接空值数据\n * @returns 返回处理后的点集合\n */\nexport function getPathPoints(points, connectNulls) {\n    if (!points.length) {\n        return [];\n    }\n    if (connectNulls) {\n        // 即 y 值为空的场景\n        var filtered = filter(points, function (point) {\n            return !isYNil(point);\n        });\n        return [filtered];\n    }\n    var result = [];\n    var tmp = [];\n    points.forEach(function (point) {\n        if (isYNil(point)) {\n            if (tmp.length) {\n                result.push(tmp);\n                tmp = [];\n            }\n        }\n        else {\n            tmp.push(point);\n        }\n    });\n    if (tmp.length) {\n        result.push(tmp);\n    }\n    return result;\n}\n//# sourceMappingURL=get-path-points.js.map"]},"metadata":{},"sourceType":"module"}